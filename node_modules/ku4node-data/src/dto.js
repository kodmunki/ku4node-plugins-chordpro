var $kernel = require('ku4node-kernel'),
    $ = $kernel.asserters,
    $replicate = $kernel.replicate,
    $class = $kernel.class,
    $hash = $kernel.collections.hash,
    $queryString = require('./queryString'),
    $json = require('./json');

function dto(obj) {
    dto.base.call(this, obj);
}
dto.prototype = {
    name: function(name){ return this.set("name", name); },
    toJson: function() { return $json.serialize(this.$h); },
    toQueryString: function() { return $queryString.serialize(this.$h); },
    replicate: function(){ return new dto($replicate(this.$h)); }
}
$class.extend(dto, $hash.Class);

module.exports = function(obj){ return new dto(obj); }
module.exports.parseJson = function(str) { return new dto($json.deserialize(str)); }
module.exports.parseQueryString = function(str) { return new dto($queryString.deserialize(str)); }