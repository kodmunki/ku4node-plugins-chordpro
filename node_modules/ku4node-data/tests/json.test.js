var $kernel = require('ku4node-kernel'),
    $ = $kernel.asserters,
    $json = require('../src/json'),
    $testSerialized = '{"a":null,"b":"undefined","man":{"sex":"m","age":25,"married":true,"children":["Tom","Dick","Jane"],"contact":{"home":9998887777}},"multiline":"Here is\\\\ \/ a \\n \\u001a \\u000f \\u001f \u04af multiline\\f\\nparagraph\\rfor\\ttesting","html":"<html class=\\\"css-class\\\"></html>"}',
    $testDeserialized = {a:null, b:undefined, man:{sex:"m", age:25, married:true, children:["Tom","Dick","Jane"],contact:{"home":9998887777}},"multiline":"Here is\\ / a \u000a \u001a \u000f \u001f \u04af multiline\f\nparagraph\rfor\ttesting","html":"<html class=\"css-class\"></html>"};

exports['serialize'] = function (test) {
    test.expect(1);
    test.equal($json.serialize($testDeserialized), $testSerialized);
    test.done();
};
exports['deserialize'] = function (test) {
    test.expect(6);
    var man = $json.deserialize($testSerialized);
    test.equal(man.man.sex, $testDeserialized.man.sex);
    test.equal(man.man.age, $testDeserialized.man.age);
    test.equal(man.man.married, $testDeserialized.man.married);
    test.deepEqual(man.man.children, $testDeserialized.man.children);
    test.equal(man.man.contact.home, $testDeserialized.man.contact.home);
    test.equal(man.multiline, $testDeserialized.multiline);
    test.done();
};
